<ion-header class="lecturer-header">
  <ion-toolbar>
    <ion-title>Lecturer Requests</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="refreshLecturers()" class="refresh-btn animate__animated animate__pulse animate__infinite">
        <ion-icon slot="icon-only" name="refresh"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="lecturer-page ion-padding">

  <!-- Hero Banner -->
  <div class="hero-banner">
    <div class="text-content">
      <h2>Manage Lecturer Requests</h2>
      <p>View, approve, and manage lecturer records easily.</p>
      <ion-button color="tertiary" shape="round" (click)="openAddLecturerModal()">+ Add / Assign Lecturer</ion-button>
    </div>
    <div class="graphic-elements">
      <div class="triangle-orange"></div>
      <div class="triangle-blue"></div>
    </div>
  </div>

  <!-- REFRESHER -->
  <ion-refresher slot="fixed" (ionRefresh)="loadLecturers($event)">
    <ion-refresher-content pullingIcon="lines" refreshingSpinner="crescent"></ion-refresher-content>
  </ion-refresher>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <ion-spinner name="crescent" color="primary"></ion-spinner>
    <p>Loading lecturer requests...</p>
  </div>

  <!-- Pending Requests -->
  

  <!-- Empty State -->
  <ion-item *ngIf="!isLoading && lecturerRequests.length === 0" class="empty-state">
    <ion-icon name="people-outline" slot="start" color="medium" size="large"></ion-icon>
    <ion-label color="medium">No pending lecturer requests</ion-label>
  </ion-item>

  <!-- Approved Lecturers -->
<div class="lecturer-list" *ngIf="lecturers.length > 0">
  <ion-card *ngFor="let lecturer of lecturers" class="lecturer-item" (click)="openLecturerApprovalModal(lecturer)">
    <ion-card-header>
     <div class="lecturer-avatar-container">
      <ion-icon 
        name="person-circle-outline" 
        class="lecturer-avatar-icon" 
        (click)="viewProfile(lecturer); $event.stopPropagation()">
      </ion-icon>
    </div>
      <ion-card-title>{{ lecturer.name }}</ion-card-title>
      <ion-card-subtitle>{{ lecturer.email }}</ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      <ion-badge [color]="lecturer.status === 'active' ? 'success' : 'danger'" class="status-badge">
        {{ lecturer.status | titlecase }}
      </ion-badge>
      <div class="card-actions">
  <!-- Existing toggle button -->
  <ion-button [color]="lecturer.status === 'active' ? 'danger' : 'success'"
              (click)="toggleLecturerStatus(lecturer); $event.stopPropagation()"
              [title]="lecturer.status === 'active' ? 'Suspend Lecturer' : 'Reactivate Lecturer'">
    <ion-icon slot="icon-only"
              [name]="lecturer.status === 'active' ? 'remove-circle-outline' : 'checkmark-circle-outline'">
    </ion-icon>
  </ion-button>

  <!-- New dedicated Reactivate button, only shows if lecturer is suspended -->
  <ion-button *ngIf="lecturer.status !== 'active'"
              color="success"
              (click)= "toggleLecturerStatus(lecturer); $event.stopPropagation()"
              title="Reactivate Lecturer">
    <ion-icon slot="icon-only" name="checkmark-circle-outline"></ion-icon>
  </ion-button>
</div>
    </ion-card-content>
  </ion-card>
</div>


</ion-content>
